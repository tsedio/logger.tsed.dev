import{_ as s,c as i,af as a,o as l}from"./chunks/framework.JWorlyEv.js";const k=JSON.parse('{"title":"Date Rolling File Appender","description":"","frontmatter":{},"headers":[],"relativePath":"appenders/file-date.md","filePath":"appenders/file-date.md","lastUpdated":1733043293000}'),t={name:"appenders/file-date.md"};function n(o,e,r,h,p,d){return l(),i("div",null,e[0]||(e[0]=[a(`<h1 id="date-rolling-file-appender" tabindex="-1">Date Rolling File Appender <a class="header-anchor" href="#date-rolling-file-appender" aria-label="Permalink to &quot;Date Rolling File Appender&quot;">​</a></h1><p>This is a file appender that rolls log files based on a configurable time, rather than the file size. When using the date file appender, you should also call <a href="/introduction/getting-started.html">logger.shutdown()</a> when your application terminates, to ensure that any remaining asynchronous writes have finished. Although the date file appender uses the <a href="https://github.com/nomiddlename/streamroller" target="_blank" rel="noreferrer">streamroller</a> library, this is included as a dependency of log4js so you do not need to include it yourself.</p><h2 id="configuration" tabindex="-1">Configuration <a class="header-anchor" href="#configuration" aria-label="Permalink to &quot;Configuration&quot;">​</a></h2><ul><li><strong>type</strong> - <code>file</code></li><li><strong>filename</strong> - <code>string</code> - the path of the file where you want your logs written.</li><li><strong>pattern</strong> - <code>string</code> (optional, defaults to <code>.yyyy-MM-dd</code>) - the pattern to use to determine when to roll the logs.</li><li><strong>layout</strong> - (optional, defaults to basic layout) - see <a href="/layouts/">layouts</a></li></ul><p>Any other configuration parameters will be passed to the underlying <a href="https://github.com/nomiddlename/streamroller" target="_blank" rel="noreferrer">streamroller</a> implementation (see also node.js core file streams):</p><ul><li><strong>encoding</strong> - <code>string</code> (default &quot;utf-8&quot;)</li><li><strong>mode</strong>- <code>integer</code> (default 0o644 - <a href="https://nodejs.org/dist/latest-v12.x/docs/api/fs.html#fs_file_modes" target="_blank" rel="noreferrer">node.js file modes</a>)</li><li><strong>flags</strong> - <code>string</code> (default &#39;a&#39;)</li><li><strong>compress</strong> - <code>boolean</code> (default false) - compress the backup files during rolling (backup files will have <code>.gz</code> extension)</li><li><strong>alwaysIncludePattern</strong> - <code>boolean</code> (default false) - include the pattern in the name of the current log file as well as the backups.</li><li><strong>daysToKeep</strong> - <code>integer</code> (default 0) - if this value is greater than zero, then files older than that many days will be deleted during log rolling.</li><li><strong>keepFileExt</strong> - <code>boolean</code> (default false) - preserve the file extension when rotating log files (<code>file.log</code> becomes <code>file.2017-05-30.log</code> instead of <code>file.log.2017-05-30</code>).</li></ul><p>The <code>pattern</code> is used to determine when the current log file should be renamed and a new log file created. For example, with a filename of &#39;cheese.log&#39;, and the default pattern of <code>.yyyy-MM-dd</code> - on startup this will result in a file called <code>cheese.log</code> being created and written to until the next write after midnight. When this happens, <code>cheese.log</code> will be renamed to <code>cheese.log.2017-04-30</code> and a new <code>cheese.log</code> file created. The appender uses the <a href="https://github.com/nomiddlename/date-format" target="_blank" rel="noreferrer">date-format</a> library to parse the <code>pattern</code>, and any of the valid formats can be used. Also note that there is no timer controlling the log rolling - changes in the pattern are determined on every log write. If no writes occur, then no log rolling will happen. If your application logs infrequently this could result in no log file being written for a particular time period.</p><h2 id="example-default-daily-log-rolling" tabindex="-1">Example (default daily log rolling) <a class="header-anchor" href="#example-default-daily-log-rolling" aria-label="Permalink to &quot;Example (default daily log rolling)&quot;">​</a></h2><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {Logger} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;@tsed/logger&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> logger</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Logger</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;loggerName&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">logger.appenders.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;everything&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;file&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  filename: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;all-the-logs.log&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  pattern: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;.yyyy-MM-dd&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">logger.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">debug</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;I will be logged in all-the-logs.log&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><p>This example will result in files being rolled every day. The initial file will be <code>all-the-logs.log</code>, with the daily backups being <code>all-the-logs.log.2017-04-30</code>, etc.</p><h2 id="example-with-hourly-log-rolling-and-compressed-backups" tabindex="-1">Example with hourly log rolling (and compressed backups) <a class="header-anchor" href="#example-with-hourly-log-rolling-and-compressed-backups" aria-label="Permalink to &quot;Example with hourly log rolling (and compressed backups)&quot;">​</a></h2><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {Logger} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;@tsed/logger&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> logger</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Logger</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;loggerName&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">logger.appenders.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;everything&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;file&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  filename: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;all-the-logs.log&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  pattern: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;.yyyy-MM-dd-hh&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  compress: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><p>This will result in one current log file (<code>all-the-logs.log</code>). Every hour this file will be compressed and renamed to <code>all-the-logs.log.2017-04-30-08.gz</code> (for example) and a new <code>all-the-logs.log</code> created.</p>`,13)]))}const c=s(t,[["render",n]]);export{k as __pageData,c as default};
