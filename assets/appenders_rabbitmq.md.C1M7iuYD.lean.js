import{_ as e,c as t,j as i,a as n,G as o,af as l,B as p,o as h}from"./chunks/framework.JWorlyEv.js";const y=JSON.parse('{"title":"RabbitMQ Appender","description":"","frontmatter":{},"headers":[],"relativePath":"appenders/rabbitmq.md","filePath":"appenders/rabbitmq.md","lastUpdated":1733043293000}'),d={name:"appenders/rabbitmq.md"};function r(k,s,c,g,E,u){const a=p("Banner");return h(),t("div",null,[s[0]||(s[0]=i("h1",{id:"rabbitmq-appender",tabindex:"-1"},[n("RabbitMQ Appender "),i("a",{class:"header-anchor",href:"#rabbitmq-appender","aria-label":'Permalink to "RabbitMQ Appender"'},"​")],-1)),o(a,{src:"/rabbitmq.svg",height:"100",href:"https://www.rabbitmq.com/"}),s[1]||(s[1]=l(`<p>Push log events to a <a href="https://www.rabbitmq.com/" target="_blank" rel="noreferrer">RabbitMQ</a>.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --save</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> @tsed/logger-rabitmq</span></span></code></pre></div><p>If you want to be sure that all messages have been sent before your programme exits, remember to call <code>logger.shutdown()</code>.</p><h2 id="configuration" tabindex="-1">Configuration <a class="header-anchor" href="#configuration" aria-label="Permalink to &quot;Configuration&quot;">​</a></h2><ul><li><code>type</code> - <code>rabbitmq</code></li><li><code>layout</code> - <code>object</code> (optional, defaults to <code>messagePassThroughLayout</code>) - the layout to use for log events (see <a href="/layouts/">Layouts</a>).</li><li><code>options.host</code> - <code>string</code> (optional, defaults to <code>127.0.0.1</code>) - the location of the rabbitmq server</li><li><code>options.port</code> - <code>integer</code> (optional, defaults to <code>5672</code>) - the port the rabbitmq server is listening on</li><li><code>options.username</code> - <code>string</code> (optional, defaults to <code>guest</code>) - username to use when authenticating connection to rabbitmq</li><li><code>options.password</code> - <code>string</code> (optional, defaults to <code>guest</code>) - password to use when authenticating connection to rabbitmq</li><li><code>options.routing_key</code> - <code>string</code> (optional, defaults to <code>logstash</code>) - rabbitmq message&#39;s routing_key</li><li><code>options.durable</code> - <code>string</code> (optional, defaults to false) - will that RabbitMQ lose our queue.</li><li><code>options.exchange</code> - <code>string</code> (optional, defaults to <code>log</code>)- rabbitmq send message&#39;s exchange</li><li><code>options.mq_type</code> - <code>string</code> (optional, defaults to <code>direct</code>) - rabbitmq message&#39;s mq_type</li><li><code>options.vhost</code> - <code>string</code> (optional, defaults to <code>/</code>) - vhost to use</li><li><code>options.shutdownTimeout</code> - <code>integer</code> (optional, defaults to <code>10000</code>) - maximum time in milliseconds to wait for messages to be sent during log4js shutdown.</li></ul><h2 id="example" tabindex="-1">Example <a class="header-anchor" href="#example" aria-label="Permalink to &quot;Example&quot;">​</a></h2><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {Logger} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;@tsed/logger&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;@tsed/logger-rabbitmq&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> logger</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Logger</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;loggerName&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">logger.appenders.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;stdout&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;rabbitmq&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  level: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;info&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  options: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    host: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;127.0.0.1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    port: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5672</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    username: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;guest&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    password: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;guest&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    routing_key: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;logstash&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    exchange: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;exchange_logs&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    mq_type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;direct&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    durable: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><p>This configuration will push log messages to the rabbitmq on <code>127.0.0.1:5672</code>.</p>`,8))])}const m=e(d,[["render",r]]);export{y as __pageData,m as default};
